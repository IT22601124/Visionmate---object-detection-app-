{"ast":null,"code":"'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _NativeReanimated = _interopRequireDefault(require(\"./NativeReanimated\"));\nvar _commonTypes = require(\"./commonTypes\");\nvar _mutables = require(\"./mutables\");\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction initSensorData(sensorType) {\n  if (sensorType === _commonTypes.SensorType.ROTATION) {\n    return (0, _mutables.makeMutable)({\n      qw: 0,\n      qx: 0,\n      qy: 0,\n      qz: 0,\n      yaw: 0,\n      pitch: 0,\n      roll: 0,\n      interfaceOrientation: 0\n    });\n  } else {\n    return (0, _mutables.makeMutable)({\n      x: 0,\n      y: 0,\n      z: 0,\n      interfaceOrientation: 0\n    });\n  }\n}\nvar Sensor = exports.default = function () {\n  function Sensor(sensorType, config) {\n    (0, _classCallCheck2.default)(this, Sensor);\n    _defineProperty(this, \"listenersNumber\", 0);\n    _defineProperty(this, \"sensorId\", null);\n    _defineProperty(this, \"sensorType\", void 0);\n    _defineProperty(this, \"data\", void 0);\n    _defineProperty(this, \"config\", void 0);\n    this.sensorType = sensorType;\n    this.config = config;\n    this.data = initSensorData(sensorType);\n  }\n  return (0, _createClass2.default)(Sensor, [{\n    key: \"register\",\n    value: function register(eventHandler) {\n      var config = this.config;\n      var sensorType = this.sensorType;\n      this.sensorId = _NativeReanimated.default.registerSensor(sensorType, config.interval === 'auto' ? -1 : config.interval, config.iosReferenceFrame, eventHandler);\n      return this.sensorId !== -1;\n    }\n  }, {\n    key: \"isRunning\",\n    value: function isRunning() {\n      return this.sensorId !== -1 && this.sensorId !== null;\n    }\n  }, {\n    key: \"isAvailable\",\n    value: function isAvailable() {\n      return this.sensorId !== -1;\n    }\n  }, {\n    key: \"getSharedValue\",\n    value: function getSharedValue() {\n      return this.data;\n    }\n  }, {\n    key: \"unregister\",\n    value: function unregister() {\n      if (this.sensorId !== null && this.sensorId !== -1) {\n        _NativeReanimated.default.unregisterSensor(this.sensorId);\n      }\n      this.sensorId = null;\n    }\n  }]);\n}();","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_classCallCheck2","_createClass2","_NativeReanimated","_commonTypes","_mutables","_defineProperty","obj","key","_toPropertyKey","enumerable","configurable","writable","t","i","_toPrimitive","r","e","Symbol","toPrimitive","call","TypeError","String","Number","initSensorData","sensorType","SensorType","ROTATION","makeMutable","qw","qx","qy","qz","yaw","pitch","roll","interfaceOrientation","x","y","z","Sensor","config","data","register","eventHandler","sensorId","NativeReanimatedModule","registerSensor","interval","iosReferenceFrame","isRunning","isAvailable","getSharedValue","unregister","unregisterSensor"],"sources":["F:\\node\\vision\\node_modules\\react-native-reanimated\\lib\\module\\Sensor.ts"],"sourcesContent":["'use strict';\nimport NativeReanimatedModule from './NativeReanimated';\nimport type {\n  SensorConfig,\n  SharedValue,\n  Value3D,\n  ValueRotation,\n  ShareableRef,\n} from './commonTypes';\nimport { SensorType } from './commonTypes';\nimport { makeMutable } from './mutables';\n\nfunction initSensorData(\n  sensorType: SensorType\n): SharedValue<Value3D | ValueRotation> {\n  if (sensorType === SensorType.ROTATION) {\n    return makeMutable<Value3D | ValueRotation>({\n      qw: 0,\n      qx: 0,\n      qy: 0,\n      qz: 0,\n      yaw: 0,\n      pitch: 0,\n      roll: 0,\n      interfaceOrientation: 0,\n    });\n  } else {\n    return makeMutable<Value3D | ValueRotation>({\n      x: 0,\n      y: 0,\n      z: 0,\n      interfaceOrientation: 0,\n    });\n  }\n}\n\nexport default class Sensor {\n  public listenersNumber = 0;\n  private sensorId: number | null = null;\n  private sensorType: SensorType;\n  private data: SharedValue<Value3D | ValueRotation>;\n  private config: SensorConfig;\n\n  constructor(sensorType: SensorType, config: SensorConfig) {\n    this.sensorType = sensorType;\n    this.config = config;\n    this.data = initSensorData(sensorType);\n  }\n\n  register(\n    eventHandler: ShareableRef<(data: Value3D | ValueRotation) => void>\n  ) {\n    const config = this.config;\n    const sensorType = this.sensorType;\n    this.sensorId = NativeReanimatedModule.registerSensor(\n      sensorType,\n      config.interval === 'auto' ? -1 : config.interval,\n      config.iosReferenceFrame,\n      eventHandler\n    );\n    return this.sensorId !== -1;\n  }\n\n  isRunning() {\n    return this.sensorId !== -1 && this.sensorId !== null;\n  }\n\n  isAvailable() {\n    return this.sensorId !== -1;\n  }\n\n  getSharedValue() {\n    return this.data;\n  }\n\n  unregister() {\n    if (this.sensorId !== null && this.sensorId !== -1) {\n      NativeReanimatedModule.unregisterSensor(this.sensorId);\n    }\n    this.sensorId = null;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}