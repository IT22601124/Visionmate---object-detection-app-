{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _reactDom = require(\"react-dom\");\nvar _reactNative = require(\"react-native\");\nvar _createElement = _interopRequireDefault(require(\"react-native-web/dist/exports/createElement\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _excluded = [\"pointerEvents\", \"children\", \"style\"];\nvar _this = this,\n  _jsxFileName = \"F:\\\\node\\\\vision\\\\node_modules\\\\expo-gl\\\\build\\\\Canvas.js\";\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nfunction getElement(component) {\n  try {\n    return (0, _reactDom.findDOMNode)(component);\n  } catch (_unused) {\n    return component;\n  }\n}\nfunction setRef(refProp, ref) {\n  if (!refProp) return;\n  if (typeof refProp === 'function') {\n    refProp(ref);\n  } else if ('current' in refProp) {\n    refProp.current = ref;\n  }\n}\nvar Canvas = React.forwardRef(function (props, ref) {\n  return (0, _createElement.default)('canvas', Object.assign({}, props, {\n    ref: ref\n  }));\n});\nvar CanvasWrapper = function CanvasWrapper(_ref) {\n  var pointerEvents = _ref.pointerEvents,\n    children = _ref.children,\n    style = _ref.style,\n    props = (0, _objectWithoutProperties2.default)(_ref, _excluded);\n  var _React$useState = React.useState(null),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    size = _React$useState2[0],\n    setSize = _React$useState2[1];\n  var ref = React.useRef(null);\n  var _canvasRef = React.useRef(null);\n  function updateCanvasSize() {\n    var canvas = _canvasRef.current;\n    if (typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement) {\n      var _size = getSize();\n      var scale = _reactNative.PixelRatio.get();\n      canvas.style.width = `${_size.width}px`;\n      canvas.style.height = `${_size.height}px`;\n      canvas.width = _size.width * scale;\n      canvas.height = _size.height * scale;\n    }\n  }\n  function getSize() {\n    if (size) {\n      return size;\n    } else if (!ref.current || typeof window === 'undefined') {\n      return {\n        width: 0,\n        height: 0\n      };\n    }\n    var element = getElement(ref.current);\n    var _element$offsetWidth = element.offsetWidth,\n      width = _element$offsetWidth === void 0 ? 0 : _element$offsetWidth,\n      _element$offsetHeight = element.offsetHeight,\n      height = _element$offsetHeight === void 0 ? 0 : _element$offsetHeight;\n    return {\n      width: width,\n      height: height\n    };\n  }\n  var onLayout = function onLayout(event) {\n    var _event$nativeEvent$la = event.nativeEvent.layout,\n      width = _event$nativeEvent$la.width,\n      height = _event$nativeEvent$la.height;\n    if (width !== (size == null ? void 0 : size.width) || height !== size.height) {\n      setSize({\n        width: width,\n        height: height\n      });\n      if (props.onLayout) {\n        props.onLayout(event);\n      }\n    }\n  };\n  React.useEffect(function () {\n    if (ref.current != null) {\n      setSize(getSize());\n    }\n  }, [ref]);\n  React.useEffect(function () {\n    updateCanvasSize();\n  }, [size]);\n  React.useEffect(function () {\n    var canvas = _canvasRef.current;\n    if (canvas) {\n      updateCanvasSize();\n    }\n    setRef(props.canvasRef, canvas);\n  }, [_canvasRef]);\n  return (0, _jsxRuntime.jsxs)(_reactNative.View, Object.assign({}, props, {\n    style: [styles.wrapper, style],\n    ref: ref,\n    onLayout: onLayout,\n    children: [(0, _jsxRuntime.jsx)(Canvas, {\n      ref: _canvasRef,\n      pointerEvents: pointerEvents,\n      style: _reactNative.StyleSheet.absoluteFill\n    }), children]\n  }));\n};\nvar styles = _reactNative.StyleSheet.create({\n  wrapper: {\n    pointerEvents: 'box-none'\n  }\n});\nvar _default = exports.default = CanvasWrapper;","map":{"version":3,"names":["React","_interopRequireWildcard","require","_reactDom","_reactNative","_createElement","_interopRequireDefault","_jsxRuntime","_excluded","_this","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","getElement","component","findDOMNode","_unused","setRef","refProp","ref","current","Canvas","forwardRef","props","createElement","assign","CanvasWrapper","_ref","pointerEvents","children","style","_objectWithoutProperties2","_React$useState","useState","_React$useState2","_slicedToArray2","size","setSize","useRef","_canvasRef","updateCanvasSize","canvas","HTMLCanvasElement","getSize","scale","PixelRatio","width","height","window","element","_element$offsetWidth","offsetWidth","_element$offsetHeight","offsetHeight","onLayout","event","_event$nativeEvent$la","nativeEvent","layout","useEffect","canvasRef","jsxs","View","styles","wrapper","jsx","StyleSheet","absoluteFill","create","_default","exports"],"sources":["F:\\node\\vision\\node_modules\\expo-gl\\src\\Canvas.tsx"],"sourcesContent":["import * as React from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { LayoutChangeEvent, PixelRatio, StyleSheet, View, ViewProps } from 'react-native';\nimport createElement from 'react-native-web/dist/exports/createElement';\n\nfunction getElement(component) {\n  try {\n    return findDOMNode(component);\n  } catch {\n    return component;\n  }\n}\n\nfunction setRef<T>(refProp: React.Ref<T>, ref: T | null) {\n  if (!refProp) return;\n\n  if (typeof refProp === 'function') {\n    refProp(ref);\n  } else if ('current' in refProp) {\n    // @ts-ignore\n    refProp.current = ref;\n  }\n}\n\nconst Canvas = React.forwardRef(\n  (props: React.ComponentProps<typeof View>, ref: React.Ref<HTMLCanvasElement>) =>\n    createElement('canvas', { ...props, ref })\n);\n\nconst CanvasWrapper: React.FunctionComponent<\n  ViewProps & {\n    canvasRef: React.Ref<HTMLCanvasElement>;\n  }\n> = ({ pointerEvents, children, style, ...props }) => {\n  const [size, setSize] = React.useState<{ width: number; height: number } | null>(null);\n\n  const ref = React.useRef<View>(null);\n  const _canvasRef = React.useRef<HTMLCanvasElement>(null);\n\n  function updateCanvasSize(): void {\n    const canvas = _canvasRef.current;\n    // eslint-disable-next-line no-undef\n    if (typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement) {\n      const size = getSize();\n      const scale = PixelRatio.get();\n\n      canvas.style.width = `${size.width}px`;\n      canvas.style.height = `${size.height}px`;\n\n      canvas.width = size.width * scale;\n      canvas.height = size.height * scale;\n    }\n  }\n\n  function getSize(): { width: number; height: number } {\n    if (size) {\n      return size;\n    } else if (!ref.current || typeof window === 'undefined') {\n      return { width: 0, height: 0 };\n    }\n    const element = getElement(ref.current);\n    const { offsetWidth: width = 0, offsetHeight: height = 0 } = element;\n    return { width, height };\n  }\n\n  const onLayout = (event: LayoutChangeEvent) => {\n    const {\n      nativeEvent: {\n        layout: { width, height },\n      },\n    } = event;\n\n    if (width !== size?.width || height !== size.height) {\n      setSize({ width, height });\n\n      if (props.onLayout) {\n        props.onLayout(event);\n      }\n    }\n  };\n\n  React.useEffect(() => {\n    if (ref.current != null) {\n      setSize(getSize());\n    }\n  }, [ref]);\n\n  React.useEffect(() => {\n    updateCanvasSize();\n  }, [size]);\n\n  React.useEffect(() => {\n    const canvas = _canvasRef.current;\n    if (canvas) {\n      updateCanvasSize();\n    }\n    setRef(props.canvasRef, canvas);\n  }, [_canvasRef]);\n\n  return (\n    <View {...props} style={[styles.wrapper, style]} ref={ref} onLayout={onLayout}>\n      <Canvas ref={_canvasRef} pointerEvents={pointerEvents} style={StyleSheet.absoluteFill} />\n      {children}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    pointerEvents: 'box-none',\n  },\n});\n\nexport default CanvasWrapper;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}